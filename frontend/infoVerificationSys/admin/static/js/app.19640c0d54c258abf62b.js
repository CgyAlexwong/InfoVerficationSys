webpackJsonp([1],{"1N7d":function(e,t){},NE3s:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("7+uW"),n={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var l=a("VU/8")({name:"App"},n,!1,function(e){a("NE3s")},null,null).exports,i=a("/ocq"),s={name:"Admin",methods:{handleSelect:function(e,t){console.log(e,t)},handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"container"},[a("el-header",{staticClass:"header"},[a("el-menu",{staticClass:"nav",attrs:{"default-active":e.$route.path,"background-color":"transparent",router:"","text-color":"#000000","active-text-color":"#d3d3d3",mode:"horizontal"},on:{select:e.handleSelect}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-message",staticStyle:{color:"#ffffff"}}),e._v("上传学生信息\n                ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/admin/uploadExcel"}},[a("i",{staticClass:"el-icon-document",staticStyle:{color:"darkblue"}}),e._v("上传Excel\n                ")]),e._v(" "),a("el-menu-item",{attrs:{index:"/admin/uploadPhotos"}},[a("i",{staticClass:"el-icon-picture",staticStyle:{color:"darkblue"}}),e._v("上传照片\n                ")])],2),e._v(" "),a("el-menu-item",{staticStyle:{"margin-left":"5px"},attrs:{index:"2",route:"/admin/checkStudentStatus"}},[a("i",{staticClass:"el-icon-picture",staticStyle:{color:"#ffffff"}}),e._v("查看学生状态\n            ")]),e._v(" "),a("el-menu-item",{staticStyle:{"margin-left":"5px"},attrs:{index:"3",route:"/admin/checkFeedback"}},[a("i",{staticClass:"el-icon-menu",staticStyle:{color:"#ffffff"}}),e._v("查看学生反馈\n            ")])],1)],1),e._v(" "),a("el-container",[a("el-aside",{staticClass:"aside",attrs:{width:"70px"}}),e._v(" "),a("el-main",{staticClass:"main"},[a("router-view")],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,r,!1,function(e){a("s509")},"data-v-257fcf68",null).exports,u=a("mtWM"),d=a.n(u);d.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",d.a.defaults.baseURL="http://47.103.9.254:3142";var m={name:"AdminLogin",data:function(){return{username:"",password:""}},methods:{login:function(){var e,t=this;""===this.username?this.$message.error("请输入管理员账号"):""===this.password?this.$message.error("请输入管理员密码"):(e={username:this.username,password:this.password},d.a.post("/login/adminLogin",e)).then(function(e){e.data.succeed?(localStorage.setItem("Flag","isLogin"),t.$message.success("登陆成功"),setTimeout(function(){this.$router.push("/admin/checkStudentStatus")}.bind(t),500)):t.$message.error(e.data.msg)})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"container"},[a("el-header",{staticClass:"header"},[a("i",{staticClass:"el-icon-menu icon-size"}),e._v("南 京 大 学 台 港 澳 学 生 信 息 校 验 系 统\n    ")]),e._v(" "),a("el-container",[a("el-aside",{staticClass:"aside",attrs:{width:"70px"}},[a("el-menu",{staticClass:"el-menu-vertical-demo menu-style",attrs:{"default-active":"1","background-color":"transparent","text-color":"#fff","active-text-color":"#ffd04b"}},[a("el-menu-item",{attrs:{index:"1"}},[a("i",{staticClass:"el-icon-location"})]),e._v(" "),a("el-menu-item",{attrs:{index:"2"}},[a("i",{staticClass:"el-icon-menu"})]),e._v(" "),a("el-menu-item",{attrs:{index:"3"}},[a("i",{staticClass:"el-icon-document"})]),e._v(" "),a("el-menu-item",{attrs:{index:"4"}},[a("i",{staticClass:"el-icon-setting"})])],1)],1),e._v(" "),a("el-main",{staticClass:"main"},[a("div",{staticClass:"login"},[a("el-row",[a("div",{staticClass:"login-text"},[e._v("\n                        管理员登陆\n                    ")])]),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"250px"},attrs:{size:"large",placeholder:"请输入管理员账号"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),e._v(" "),a("div",[a("el-input",{staticStyle:{width:"250px"},attrs:{size:"large",placeholder:"请输入管理员密码","show-password":""},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),e._v(" "),a("div",[a("button",{staticClass:"login-button",on:{click:e.login}},[e._v("登陆")])])],1)])],1)],1)},staticRenderFns:[]};var h=a("VU/8")(m,f,!1,function(e){a("snPU")},"data-v-3b5e4b38",null).exports,p={render:function(){var e=this.$createElement;return(this._self._c||e)("div")},staticRenderFns:[]};var b=a("VU/8")({name:"CheckInfo"},p,!1,function(e){a("Nzva")},"data-v-ca37fffc",null).exports,g=a("zL8q"),v=a.n(g),y={name:"CheckStatus",data:function(){return{tableData:[],stuInfoForm:{examNum:"",stuName:"",foreignName:"",sex:1,nation:"",birthdate:"",originPlace:1,subject:1,graduateDate:"",email:"",phoneNumber:"",mobileNumber:"",identityNum:"",mtpNumber:"",postal:"",nativePlace:"",address:"",graduateSchool:"",emergencyContact:{emergencyContactPerson:"",emergencyContactNumber:"",emergencyContactAddress:""}},ocrPhoto:"https://github.com/CgyAlexwong/InfoVerficationSys/blob/uc1/frontend/infoVerificationSys/src/assets/da8e974dc.jpg?raw=true",currentIdentityNum:"",queryInfo:[{databaseInfo:"",studentInfo:"",prop:"",selectedInfo:""}],formLabelWidth:"120px",checkWidth:"200px",search:"",dialogFormVisible:!1,queryFormVisible:!1,loading:!0}},mounted:function(){var e=this;this.$nextTick(function(){e.getStatus()})},computed:{filteredTableData:function(){var e=this;return this.tableData.filter(function(t){return!e.search||t.stuName.toLowerCase().includes(e.search.toLowerCase())})}},methods:{getStatus:function(){var e=this;d.a.get("/adminBasicFunc/getUserStatus").then(function(t){e.tableData=t.data}).catch(function(t){e.$message({message:t.toString(),type:"error"})})},handleDialogClose:function(){var e=this;this.$confirm("确认关闭？").then(function(){!0===e.dialogFormVisible&&(e.dialogFormVisible=!1),!0===e.queryFormVisible&&(e.queryFormVisible=!1)}).catch(function(){})},handleQueryEdit:function(e){var t,a=this;this.queryFormVisible=!0,this.currentIdentityNum=e.identityNum,(t=e.identityNum,d.a.get("/adminBasicFunc/handleFeedback",{params:{identityNum:t}})).then(function(e){a.ocrPhoto=e.data.ocrPhoto,a.queryInfo=e.data.queryInfo,a.loading=!1}).catch(function(e){a.$message({message:e.toString(),type:"error"})})},editQuerySubmit:function(){var e,t=this,a=!0;if(this.queryInfo.forEach(function(e){""!==e.selectedInfo&&void 0!==e.selectedInfo||(a=!1)}),a){this.queryFormVisible=!1;var o=[];this.queryInfo.forEach(function(e){var t={};t.prop=e.prop,t.info=e.selectedInfo,o.push(t)}),console.log(this.currentIdentityNum),console.log(o),(e={identityNum:this.currentIdentityNum,selectInfos:o},d.a.post("/adminBasicFunc/changeQuestionableInfo",e)).then(function(e){e.data.succeed?(t.$message({message:"修改成功",type:"success"}),t.getStatus(),t.queryFormVisible=!1):t.$message({message:e.data.msg,type:"error"})})}else this.$message.error("存疑信息未全部处理！")},handleInfoEdit:function(e){var t,a=this;this.dialogFormVisible=!0,console.log(e.identityNum),(t=e.identityNum,d.a.get("/adminBasicFunc/getUserInfo",{headers:{identityNum:t}})).then(function(e){a.stuInfoForm=e.data})},editInfoSubmit:function(){var e,t=this;(e={examNum:this.stuInfoForm.examNum,stuName:this.stuInfoForm.stuName,foreignName:this.stuInfoForm.foreignName,sex:this.stuInfoForm.sex,nation:this.stuInfoForm.nation,birthdate:this.stuInfoForm.birthdate,originPlace:this.stuInfoForm.originPlace,subject:this.stuInfoForm.subject,graduateDate:this.stuInfoForm.graduateDate,email:this.stuInfoForm.email,phoneNumber:this.stuInfoForm.phoneNumber,mobileNumber:this.stuInfoForm.mobileNumber,identityNum:this.stuInfoForm.identityNum,mtpNumber:this.stuInfoForm.mtpNumber,postal:this.stuInfoForm.postal,nativePlace:this.stuInfoForm.nativePlace,address:this.stuInfoForm.address,graduateSchool:this.stuInfoForm.graduateSchool,emergencyContactPerson:this.stuInfoForm.emergencyContact.emergencyContactPerson,emergencyContactNumber:this.stuInfoForm.emergencyContact.emergencyContactNumber,emergencyContactAddress:this.stuInfoForm.emergencyContact.emergencyContactAddress},d.a.post("/adminBasicFunc/changeUserInfo",e)).then(function(e){e.data.succeed?(t.$message({message:"编辑成功",type:"success"}),t.editFormVisible=!1,t.getStatus()):t.$message({message:e.data.msg,type:"error"})})}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"wrapper"},[a("el-table",{staticStyle:{width:"100%",margin:"0 auto"},attrs:{data:e.filteredTableData,stripe:"","highlight-current-row":""}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",width:"200px",ixed:"",label:"姓名",prop:"stuName"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",width:"250px",label:"身份证号码",prop:"identityNum"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"","header-align":"center",align:"center",width:e.checkWidth,label:"基本信息校验",prop:"basicInfoCheck"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.basicInfoCheck?a("el-button",{attrs:{type:"primary",plain:"",disabled:""}},[e._v("已完成")]):e._e(),e._v(" "),0===t.row.basicInfoCheck?a("el-button",{attrs:{type:"danger",plain:"",disabled:""}},[e._v("未完成")]):e._e(),e._v(" "),a("el-tooltip",{staticClass:"top item",attrs:{effect:"dark",content:"点击查看存疑信息",placement:"top"}},[2===t.row.basicInfoCheck?a("el-button",{attrs:{type:"warning",plain:""},on:{click:function(a){return e.handleQueryEdit(t.row)}}},[e._v("存疑\n                    ")]):e._e()],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{sortable:"","header-align":"center",align:"center",width:e.checkWidth,label:"其他信息校验",prop:"otherInfoCheck"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.otherInfoCheck?a("el-button",{attrs:{type:"primary",plain:"",disabled:""}},[e._v("已完成")]):e._e(),e._v(" "),0===t.row.otherInfoCheck?a("el-button",{attrs:{type:"danger",plain:"",disabled:""}},[e._v("未完成")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"medium",round:"",icon:"el-icon-edit"},on:{click:function(a){return e.handleInfoEdit(t.row)}}},[e._v("修改学生信息\n                ")])]}},{key:"header",fn:function(t){return[a("el-input",{staticStyle:{width:"300px"},attrs:{size:"medium",placeholder:"请输入姓名搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}}])})],1),e._v(" "),a("el-dialog",{staticStyle:{"padding-top":"0"},attrs:{title:"学生存疑信息",visible:e.queryFormVisible,"before-close":e.handleDialogClose},on:{"update:visible":function(t){e.queryFormVisible=t}}},[a("p",{staticStyle:{"font-size":"larger","font-weight":"bolder"}},[e._v("⚠️ 第一项为数据库信息；第二项为学生填写信息")]),e._v(" "),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中","element-loading-background":"rgba(0, 0, 0, 0.9)","element-loading-spinner":"el-icon-loading"}},[e._l(e.queryInfo,function(t,o){return a("el-form-item",{key:o,attrs:{label:t.prop}},[[a("el-radio",{attrs:{label:t.databaseInfo},model:{value:t.selectedInfo,callback:function(a){e.$set(t,"selectedInfo",a)},expression:"info.selectedInfo"}},[e._v(e._s(t.databaseInfo)+"\n                    ")]),e._v(" "),a("el-radio",{attrs:{label:t.studentInfo},model:{value:t.selectedInfo,callback:function(a){e.$set(t,"selectedInfo",a)},expression:"info.selectedInfo"}},[e._v(e._s(t.studentInfo))]),e._v(" "),a("el-radio",{attrs:{label:"其他"}},[e._v("\n                        其他\n                        "),a("el-input",{staticStyle:{"margin-left":"10px",width:"100px"},attrs:{clearable:""},model:{value:t.selectedInfo,callback:function(a){e.$set(t,"selectedInfo",a)},expression:"info.selectedInfo"}})],1)]],2)}),e._v(" "),a("el-form-item",[a("img",{staticStyle:{height:"600px"},attrs:{src:e.ocrPhoto.split("\n").join(""),alt:"无法显示图片"}})])],2),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.queryFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editQuerySubmit}},[e._v("提交修改")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"学生基本信息",visible:e.dialogFormVisible,"before-close":e.handleDialogClose},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{attrs:{model:e.stuInfoForm}},[a("el-form-item",{attrs:{label:"考生号","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.examNum,callback:function(t){e.$set(e.stuInfoForm,"examNum",t)},expression:"stuInfoForm.examNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"姓名","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.stuName,callback:function(t){e.$set(e.stuInfoForm,"stuName",t)},expression:"stuInfoForm.stuName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"外文姓名","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.foreignName,callback:function(t){e.$set(e.stuInfoForm,"foreignName",t)},expression:"stuInfoForm.foreignName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.stuInfoForm.sex,callback:function(t){e.$set(e.stuInfoForm,"sex",t)},expression:"stuInfoForm.sex"}},[a("el-radio",{attrs:{label:1}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:0}},[e._v("女")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"民族","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.nation,callback:function(t){e.$set(e.stuInfoForm,"nation",t)},expression:"stuInfoForm.nation"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"出生日期","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.birthdate,callback:function(t){e.$set(e.stuInfoForm,"birthdate",t)},expression:"stuInfoForm.birthdate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"生源地","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.stuInfoForm.originPlace,callback:function(t){e.$set(e.stuInfoForm,"originPlace",t)},expression:"stuInfoForm.originPlace"}},[a("el-radio",{attrs:{label:1}},[e._v("台湾")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("香港")]),e._v(" "),a("el-radio",{attrs:{label:3}},[e._v("澳门")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"报考科类","label-width":e.formLabelWidth}},[a("el-radio-group",{model:{value:e.stuInfoForm.subject,callback:function(t){e.$set(e.stuInfoForm,"subject",t)},expression:"stuInfoForm.subject"}},[a("el-radio",{attrs:{label:0}},[e._v("文科")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("理科")]),e._v(" "),a("el-radio",{attrs:{label:-1}},[e._v("不分文理")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"毕业时间","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.graduateDate,callback:function(t){e.$set(e.stuInfoForm,"graduateDate",t)},expression:"stuInfoForm.graduateDate"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"电子邮件","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.email,callback:function(t){e.$set(e.stuInfoForm,"email",t)},expression:"stuInfoForm.email"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"联系电话","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.phoneNumber,callback:function(t){e.$set(e.stuInfoForm,"phoneNumber",t)},expression:"stuInfoForm.phoneNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"移动电话","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.mobileNumber,callback:function(t){e.$set(e.stuInfoForm,"mobileNumber",t)},expression:"stuInfoForm.mobileNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"身份证","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.identityNum,callback:function(t){e.$set(e.stuInfoForm,"identityNum",t)},expression:"stuInfoForm.identityNum"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通行证","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.mtpNumber,callback:function(t){e.$set(e.stuInfoForm,"mtpNumber",t)},expression:"stuInfoForm.mtpNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"邮政编码","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.postal,callback:function(t){e.$set(e.stuInfoForm,"postal",t)},expression:"stuInfoForm.postal"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"籍贯","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.nativePlace,callback:function(t){e.$set(e.stuInfoForm,"nativePlace",t)},expression:"stuInfoForm.nativePlace"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"通讯地址","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.address,callback:function(t){e.$set(e.stuInfoForm,"address",t)},expression:"stuInfoForm.address"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"毕业中学","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.graduateSchool,callback:function(t){e.$set(e.stuInfoForm,"graduateSchool",t)},expression:"stuInfoForm.graduateSchool"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"紧急联系人","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.emergencyContact.emergencyContactPerson,callback:function(t){e.$set(e.stuInfoForm.emergencyContact,"emergencyContactPerson",t)},expression:"stuInfoForm.emergencyContact.emergencyContactPerson"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"紧急联系人电话","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.emergencyContact.emergencyContactNumber,callback:function(t){e.$set(e.stuInfoForm.emergencyContact,"emergencyContactNumber",t)},expression:"stuInfoForm.emergencyContact.emergencyContactNumber"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"紧急联系人地址","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.stuInfoForm.emergencyContact.emergencyContactAddress,callback:function(t){e.$set(e.stuInfoForm.emergencyContact,"emergencyContactAddress",t)},expression:"stuInfoForm.emergencyContact.emergencyContactAddress"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.editInfoSubmit}},[e._v("提交修改")])],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(y,x,!1,function(e){a("1N7d")},"data-v-e6599d4c",null).exports,I={name:"UploadExcel",data:function(){return{stuExcelData:new FormData}},methods:{handleExceed:function(){this.$message.error("一次只允许上传一个Excel文件！")},beforeUploadExcel:function(e){var t=e.name.split(".")[1];if("xls"===t||"xlsx"===t)return e;this.$message.error("上传文件只能是 xls/xlsx 格式")},uploadStuExcel:function(){var e=this;this.$refs.uploadStuExcel.submit();0===this.stuExcelData.getAll("file").length?this.$message.error("请按照要求上传Excel表"):function(e,t){return d.a.post("/excel/upload",e,t)}(this.stuExcelData,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){t.data.succeed?(e.$message.success("上傳成功"),e.stuExcelData=new FormData):e.$message.error(t.data.msg)}).catch(function(t){e.$message.error(t.toString())})},excel:function(e){this.stuExcelData.append("file",e.file)}}},F={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:6}},[a("el-card",{staticStyle:{height:"400px"}},[a("el-button",{staticStyle:{float:"left","padding-top":"0"},attrs:{slot:"header",type:"text"},slot:"header"},[e._v("上传学生信息提示\n                ")]),e._v(" "),a("div",{staticClass:"promptMsg"},[a("ul",[a("li",[e._v("请上传Excel文件,文件后缀需为'xls'或'xlsx'")]),e._v(" "),a("li",[e._v("请一次上传一个文件")])])])],1)],1),e._v(" "),a("el-col",{attrs:{span:18}},[a("el-card",{ref:"card",staticStyle:{height:"400px"}},[a("el-button",{staticStyle:{float:"left","padding-top":"0"},attrs:{slot:"header",type:"text"},slot:"header"},[e._v("请在此处上传Excel\n                ")]),e._v(" "),a("el-upload",{ref:"uploadStuExcel",attrs:{limit:1,"on-exceed":e.handleExceed,"http-request":e.excel,"auto-upload":!1,"before-upload":e.beforeUploadExcel,drag:"",action:"http://localhost8080/#/admin/uploadExcel"}},[a("i",{staticClass:"el-icon-upload"},[a("div",{staticStyle:{"font-size":"5px"}},[e._v("将文件拖到此处，或点击上传")])])]),e._v(" "),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.uploadStuExcel}},[e._v("确认上传")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var w=a("VU/8")(I,F,!1,function(e){a("qz9p")},"data-v-0ed94b08",null).exports,k=a("BO1k"),C=a.n(k),S=a("U7mS"),N={name:"UploadPhotos",data:function(){return{dialogImageUrl:"",dialogVisible:!1,stuPhotosData:new FormData,noUpload:[{identityNum:"11"}],failedUpload:[{identityNum:"A123456789",msg:"图片质量太低!"}]}},mounted:function(){var e=this;this.$nextTick(function(){e.getList()})},methods:{getList:function(){var e=this;d.a.get("/photo/getNoPhotoList").then(function(t){e.noUpload=t.data,e.failedUpload=t.data.filter(function(e){return""!==e.msg})}).catch(function(e){})},beforeUploadPhotos:function(e){var t="image/jpeg"===e.type||"image/png"===e.type;e.size;return t||this.$message.error("上传文件只能是 jpg(jpeg)/png 格式"),t},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0},uploadStuPhotos:function(){var e=this;this.$refs.uploadStuPhotos.submit();0===this.stuPhotosData.getAll("file").length?this.$message.error("请按照要求上传学生照片"):function(e,t){return d.a.post("/photo/upload",e,t)}(this.stuPhotosData,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){t.data.succeed?(e.$message.success("上傳成功"),e.stuPhotosData=new FormData,e.getList()):e.$message.error(t.data.msg)}).catch(function(t){e.$message.error(t.toString())})},photos:function(e){var t=this,a=e.file.size/1024/1024;if(console.log(a),a>=.3){var o=e.file.name;console.log(o),S(e.file,{quality:.7,filedName:o}).then(function(e){console.log(e.file.size/1024/1024),t.stuPhotosData.append("file",e.file,o),console.log(t.stuPhotosData.getAll("file").length);var a=t.stuPhotosData.getAll("file"),n=!0,l=!1,i=void 0;try{for(var s,r=C()(a);!(n=(s=r.next()).done);n=!0){var c=s.value;console.log(c.name)}}catch(e){l=!0,i=e}finally{try{!n&&r.return&&r.return()}finally{if(l)throw i}}}).catch(function(e){t.$message.error(e.toString())})}else this.stuPhotosData.append("file",e.file)}}},$={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-card",{staticStyle:{height:"400px"}},[a("el-button",{staticStyle:{float:"left",padding:"0"},attrs:{slot:"header",type:"text"},slot:"header"},[e._v("未上传照片学生列表\n                ")]),e._v(" "),a("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.noUpload,"max-height":"500"}},[a("el-table-column",{attrs:{fixed:"",prop:"identityNum",label:"身份证号",width:"150"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:14}},[a("el-card",[a("el-button",{staticStyle:{float:"left","padding-top":"0"},attrs:{slot:"header",type:"text"},slot:"header"},[e._v("请在此处上传学生照片\n\n                ")]),e._v(" "),a("el-upload",{ref:"uploadStuPhotos",attrs:{id:"uploadStuPhotos","http-request":e.photos,"auto-upload":!1,action:"http://localhost8080/#/admin/uploadPhotos",multiple:"","list-type":"picture-card","before-upload":e.beforeUploadPhotos,"on-preview":e.handlePictureCardPreview}},[a("i",{staticClass:"el-icon-plus"})]),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})]),e._v(" "),a("div",{staticClass:"promptMsg"},[a("p",[e._v("只能上传jpg/png文件")])]),e._v(" "),a("div",[a("el-button",{staticStyle:{"margin-top":"30px"},attrs:{type:"primary"},on:{click:e.uploadStuPhotos}},[e._v("确认上传")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-card",{staticStyle:{height:"400px"}},[a("el-button",{staticStyle:{float:"left","padding-top":"0"},attrs:{slot:"header",type:"text"},slot:"header"},[e._v("照片不合格学生列表\n                ")]),e._v(" "),a("el-table",{staticClass:"table",staticStyle:{width:"100%"},attrs:{data:e.failedUpload,"max-height":"500"}},[a("el-table-column",{attrs:{fixed:"",prop:"identityNum",label:"身份证号",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"msg",label:"错误信息",width:"150"}})],1)],1)],1)],1)],1)},staticRenderFns:[]};var P=a("VU/8")(N,$,!1,function(e){a("wf0T")},"data-v-4c3cb09c",null).exports,L={name:"checkFeedback",data:function(){return{feedback:[{stuIndex:1,stuName:"学生A",contact:"手机：123456789",remark:"中午没空",dealWith:!1}]}},mounted:function(){var e=this;this.$nextTick(function(){d.a.get("/adminBasicFunc/check").then(function(t){e.feedback=t.data}).catch(function(t){e.$message({message:t.toString(),type:"error"})})})},methods:{changeFeedback:function(e){var t=this;this.$confirm("确认已处理完该学生的反馈吗？一旦确认，不可更改").then(function(){for(var a,o=e.stuIndex,n=0;n<t.feedback.length;n++)if(t.feedback[n].stuIndex===o){t.feedback[n].dealWith=!0;break}(a={stuIndex:e.stuIndex},d.a.post("/adminBasicFunc/changeIsHandle",a)).then(function(e){console.log(e.data),e.data.succeed?t.$message({message:"修改成功",type:"success"}):t.$message({message:e.data.msg,type:"error"})})})}}},E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",[a("el-table",{staticStyle:{width:"100%",margin:"0 auto"},attrs:{data:e.feedback,"max-height":"1000px",stripe:"","highlight-current-row":"","default-sort":{prop:"dealWith",order:"ascending"}}},[a("el-table-column",{attrs:{"header-align":"center",align:"center",fixed:"",label:"姓名",width:"180px",prop:"stuName"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",fixed:"",label:"联系方式",width:"300px",prop:"contact"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",fixed:"",label:"备注",width:"500px",prop:"remark"}}),e._v(" "),a("el-table-column",{attrs:{"header-align":"center",align:"center",fixed:"",label:"处理状态",width:"100px",prop:"dealWith",sortable:""},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.dealWith?a("el-button",{attrs:{type:"primary",plain:"",disabled:""}},[e._v("已处理")]):e._e(),e._v(" "),t.row.dealWith?e._e():a("el-button",{attrs:{type:"danger",plain:"",disabled:""}},[e._v("未处理")])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"medium",round:"",icon:"el-icon-star-off",type:"danger",disabled:!0===t.row.dealWith},on:{click:function(a){return e.changeFeedback(t.row)}}},[e._v("标记为已处理\n                ")])]}}])})],1)],1)},staticRenderFns:[]};var W=a("VU/8")(L,E,!1,function(e){a("Xyxl")},"data-v-2c9f0084",null).exports;o.default.use(i.a);var D=new i.a({routes:[{path:"/",name:"管理员登陆",component:h,iconClass:"el-icon-info",leaf:!0,meta:{isLogin:!1,icon:"",title:"南京大学台港澳学生信息校验系统"}},{path:"/admin",name:"学生信息上传",component:c,iconClass:"el-icon-menu",children:[{path:"/admin/uploadExcel",meta:{isLogin:!0},component:w,name:"上传学生信息"},{path:"/admin/uploadPhotos",meta:{isLogin:"login"},component:P,name:"上传学生照片"}],meta:{isLogin:!0,icon:"",title:"南京大学台港澳学生信息校验系统"}},{path:"/admin",name:"学生校验状态管理",component:c,iconClass:"el-icon-edit",children:[{path:"/admin/checkStudentStatus",meta:{isLogin:!0},component:_,name:"学生校验状态查看"},{path:"/admin/checkStudentInfo",meta:{isLogin:!0},component:b,name:"学生基本资料查看"}],meta:{isLogin:!0,icon:"",title:"南京大学台港澳学生信息校验系统"}},{path:"/admin",name:"学生反馈查看",component:c,iconClass:"el-icon-menu",children:[{path:"/admin/checkFeedback",meta:{isLogin:!0},component:W,name:"学生反馈查看"}],meta:{isLogin:!0,icon:"",title:"南京大学台港澳学生信息校验系统"}}]});D.beforeEach(function(e,t,a){"isLogin"===localStorage.getItem("Flag")?(a(),e.meta.isLogin||a({path:"/admin/checkStudentStatus"})):e.meta.isLogin?a({path:"/"}):a()});var U=D;a("tvR6");o.default.use(v.a);new o.default({router:U,render:function(e){return e(l)}}).$mount("#app");o.default.config.productionTip=!1},Nzva:function(e,t){},Xyxl:function(e,t){},qz9p:function(e,t){},s509:function(e,t){},snPU:function(e,t){},tvR6:function(e,t){},wf0T:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.19640c0d54c258abf62b.js.map